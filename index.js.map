{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst KEY = '45785559-b0577f06fb94f4ced9a4d3280';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function getSearch(searchText, currentPage) {\n    try {\n\n        searchText = searchText.replace(/\\s+/g, '+');\n\n        const response = axios.get(`${BASE_URL}`, {\n            params: {\n                key: KEY,\n                q: searchText,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: currentPage,\n                per_page: 5,\n            }\n        })\n        return response;\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry! The site is currently unavailable. Please try later!',\n        });\n    }\n}","export function createMarkup(array) {\n    return array.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n      </a>\n      <div class=\"thumb-block\">\n        <div class=\"block\">\n          <h2 class=\"title\">Likes</h2>\n          <p class=\"amount\">${likes}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Views</h2>\n          <p class=\"amount\">${views}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Comments</h2>\n          <p class=\"amount\">${comments}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Downloads</h2>\n          <p class=\"amount\">${downloads}</p>\n        </div>\n      </div>\n    </li>`).join('');\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getSearch } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\nconst form = document.querySelector('.js-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet saveQuery = '';\nlet refreshPage;\nlet perPage;\nlet currentPage = 1;\nlet totalHits;\n\nloader.style.display = 'none';\n\nform.addEventListener('submit', onSearch);\n\nasync function onSearch(evt) {\n    evt.preventDefault()\n    gallery.innerHTML = '';\n\n    loader.style.display = 'block';\n\n    saveQuery = evt.target.elements.query.value.trim();\n    currentPage = 1;\n\n    if (saveQuery === '') {\n        return iziToast.info({\n            title: 'Hello',\n            message: 'Please enter search text!',\n        }),\n            loader.style.display = 'none',\n            form.reset()\n    }\n\n\n    try {\n        const resp = await getSearch(saveQuery, currentPage)\n\n        gallery.insertAdjacentHTML(\"beforeend\", createMarkup(resp.data.hits));\n        totalHits = resp.data.totalHits;\n        console.log(totalHits);\n        \n\n        if (!resp.data.hits.length) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            }),\n                loader.style.display = 'none';\n            form.reset();\n            return;\n        }\n\n        loader.style.display = 'none';\n\n        refreshPage = new SimpleLightbox('.gallery a', {\n            captions: true,\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n        refreshPage.refresh();\n        checkBtnStatus();\n    } catch (err) {\n\n        loader.style.display = 'none';\n\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later!',\n        });\n\n    };\n    form.reset();\n}\n\nloadMoreBtn.addEventListener('click', loadBtnSearch);\n\nasync function loadBtnSearch() {\n    currentPage += 1;\n\n    const resp = await getSearch(saveQuery, currentPage)\n\n    gallery.insertAdjacentHTML(\"beforeend\", createMarkup(resp.data.hits));\n}\n\nfunction showLoadMoreBtn() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n    loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkBtnStatus() {\n    const maxPage = Math.ceil(totalHits / perPage);\n\n    if (currentPage >= maxPage) {\n        hideLoadMoreBtn();\n    } else {\n        showLoadMoreBtn();\n    }\n}"],"names":["KEY","BASE_URL","getSearch","searchText","currentPage","axios","iziToast","createMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","loadMoreBtn","saveQuery","refreshPage","perPage","totalHits","onSearch","evt","resp","SimpleLightbox","checkBtnStatus","loadBtnSearch","showLoadMoreBtn","hideLoadMoreBtn","maxPage"],"mappings":"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"}